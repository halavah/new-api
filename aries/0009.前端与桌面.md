# 0009. 前端与桌面

## 适合人群
- 了解 React/Vite 的 Go 初学者，想掌握本项目的前端与桌面封装。

## 前端（web/）
- 技术栈：React + Vite + bun；UI 组件（Semi UI 等），多语言支持（i18n）。
- 启动/构建：
  - 开发：`bin/start-front.(sh|bat)` → `bun run dev` 默认 5173，代理到后端 3000。
  - 构建：`bun run build`（脚本会写入 web/dist，后端可 embed 静态资源）。
- 目录要点：
  - `web/src/pages/`：页面
  - `web/src/context/`：上下文（如主题、状态）
  - `web/src/constants/`：常量
  - `web/src/i18n/`：多语言资源
- 代理与接口：`web/package.json` 中 `proxy: http://localhost:3000`，确保后端可用或调整端口。

## 桌面（electron/）
- 用途：桌面打包与托盘支持，复用 web 前端。
- 主要文件：
  - `electron/main.js`：主进程
  - `electron/preload.js`：预加载脚本
  - 图标与权限：`entitlements.mac.plist`、`tray-icon*.png`
  - 构建脚本：`electron/build.sh`
- 运行：需 Node/Electron 环境，通常在构建后加载打包好的前端。

## 与后端的关系
- 生产模式：后端嵌入 `web/dist`，通过 3000 端口提供静态页面。
- 开发模式：前端 dev (5173) 通过代理访问后端 3000。
- 桌面模式：Electron 加载本地/远程前端，调用同一后端 API。

## 常见注意事项
- 多语言：确保新增文案同步到各语言文件。
- 端口冲突：前端 dev 端口可设 `WEB_PORT`；脚本会尝试释放占用端口。
- 构建资源：生产部署需先 `bun run build` 生成 web/dist；否则后端 embed 会缺失。

## 参考文件
- `web/` 目录
- `electron/` 目录
- 启动脚本：`bin/start-front.(sh|bat)`

